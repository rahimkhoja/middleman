user nginx;
pid /run/nginx.pid;
worker_processes auto;
worker_rlimit_nofile 65535;
load_module modules/ngx_pagespeed.so;
load_module modules/ngx_http_brotli_filter_module.so;
load_module modules/ngx_http_brotli_static_module.so;

events {
        multi_accept on;
        worker_connections 65535;
}

http {
        charset utf-8;
        sendfile on;
        tcp_nopush on;
        tcp_nodelay on;
        server_tokens off;
        log_not_found off;
        types_hash_max_size 2048;
        client_max_body_size 16M;

        # MIME
        include mime.types;
        default_type application/octet-stream;

        # logging
        access_log /var/log/nginx/access.log;
        error_log /var/log/nginx/error.log warn;

        # Diffie-Hellman parameter for DHE ciphersuites
        ssl_dhparam /etc/ssl/certs/dhparam.pem;

        # SSL
        include /etc/nginx/defaults/ssl.conf;

        # Site Configs
        include /etc/nginx/conf.d/*.conf;
        include /etc/nginx/sites-enabled/*.conf;

        pagespeed FileCachePath /var/cache/pagespeed;
}
